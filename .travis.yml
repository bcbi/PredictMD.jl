##### Beginning of file

############################################################################

addons:
    apt:
        packages:
        - pdf2svg
        - pgf
        - poppler-utils
        - texlive-binaries
        - texlive-latex-base
        - texlive-latex-extra
        - texlive-pictures

branches:
    except:
        - gh-pages

cache:
    directories:
        - $HOME/.julia
        - $HOME/predictmd_cache_travis

env:
    global:
        - DOCUMENTER_DEBUG="true"
        - JULIA_DEBUG="all"
        - PREDICTMD_OPEN_PLOTS_DURING_TESTS="true"

git:
    depth: 99999999

julia:
    "1.1"
    "nightly"

language: julia

matrix:
    allow_failures:
    - julia: "nightly"
    fast_finish: true

notifications:
    email:
        on_success: never # default: change
        on_failure: always # default: always

os:
    - linux
    - osx

############################################################################

# before_install: ./ci/travis/before_install.sh

############################################################################

stages:
    - test
    - travis-2
    - travis-3
    - travis-4

############################################################################

jobs:
    include:
      - stage: travis-2
      -
        os: osx
      - stage: travis-3
      -
        os: osx
      - stage: travis-4
      -
        env:
            - COMPILED_MODULES="yes"
      -
        os: osx
        env:
      -
        os: osx
        env:
            - COMPILED_MODULES="yes"

# jobs:
#     include:
#         - stage: test
#           env:
#             - JULIA_VERSION="1.1"
#
#           install:
#           - true
#           script:
#           - true
#         -
#           env:
#             - JULIA_VERSION="1.1"
#             - COMPILED_MODULES="no"
#           install:
#           - true
#           script:
#           - true
#         - stage: travis-2
#           env:
#             - JULIA_VERSION="1.1"
#             - COMPILED_MODULES="yes"
#           install:
#           - true
#           script:
#           - true
#         -
#           env:
#             - JULIA_VERSION="1.1"
#             - COMPILED_MODULES="no"
#           install:
#           - true
#           script:
#           - true
#         - stage: travis-3
#           env:
#             - JULIA_VERSION="1.1"
#             - COMPILED_MODULES="yes"
#           install:
#           - true
#           script:
#           - true
#         -
#           env:
#             - JULIA_VERSION="1.1"
#             - COMPILED_MODULES="no"
#           install:
#           - true
#           script:
#           - true
#         - stage: travis-4
#           env:
#             - JULIA_VERSION="1.1"
#             - COMPILED_MODULES="yes"
#           install:
#           - true
#           script:
#           - true
#         -
#           env:
#             - JULIA_VERSION="1.1"
#             - COMPILED_MODULES="no"
#           install:
#           - true
#           script:
#           - true

# jobs:
#       -
#         name: travis-1
#         install:
#         - set -ev
#         - ./ci/travis/first-stage-only.sh
#         - ./ci/travis/all-stages.sh "travis-1"
#         script:
#         - true
#         stage: travis-1
#       -
#         name: travis-2
#         install:
#         - set -ev
#         - ./ci/travis/all-stages.sh "travis-2"
#         script:
#         - true
#         stage: travis-2
#       -
#         name: travis-3
#         install:
#         - set -ev
#         - ./ci/travis/all-stages.sh "travis-3"
#         script:
#         - true
#         stage: travis-3
#       -
#         name: travis-4
#         install:
#         - set -ev
#         - ./ci/travis/all-stages.sh "travis-4"
#         - ./ci/travis/last-stage-only.sh
#         script:
#         - true
#         stage: travis-4

############################################################################

##### End of file
